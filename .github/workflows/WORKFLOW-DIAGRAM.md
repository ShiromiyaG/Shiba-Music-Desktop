# ğŸ”„ Automatic Versioning and Release Workflow

## Process Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Developer                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 1. Execute script or update manually
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘  bump-version.ps1 â•‘
                    â•‘  or manual edit   â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 2. Updates version.txt
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   version.txt     â•‘
                    â•‘   (ex: 1.0.1)     â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 3. git commit + push
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub (main/master branch)                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 4. Detects change in version.txt
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   release.yml     â•‘
                    â•‘ (Single Workflow) â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 5. Reads version and creates tag
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   Tag v1.0.1      â•‘
                    â•‘   (created auto)  â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 6. Same workflow continues
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘  Build & Deploy   â•‘
                    â•‘  (same workflow)  â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 7. Installs Qt, compiles project
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   Build the EXE   â•‘
                    â•‘   + Dependencies  â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 8. Packages everything
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘  ZIP with all     â•‘
                    â•‘  ready for use    â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                              â”‚
                              â”‚ 9. Creates release on GitHub
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GitHub Release v1.0.1                                              â”‚
â”‚  â”œâ”€ ShibaMusic-Windows-x64.zip                                      â”‚
â”‚  â””â”€ Release Notes                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ 10. Users can download
                              â–¼
                    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
                    â•‘   Users           â•‘
                    â•‘   Downloads       â•‘
                    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ“ Workflow Summary

| Step | Action | Automatic? | Time |
|-------|------|-------------|-------|
| 1 | Execute `bump-version.ps1 X.Y.Z` | âŒ Manual | 5s |
| 2 | Update `version.txt` | âœ… Script | Instant |
| 3 | Commit + Push | âœ… Script (optional) | 2s |
| 4 | Detect change | âœ… GitHub | Instant |
| 5 | Create tag | âœ… Actions | 30s |
| 6 | Trigger build | âœ… Actions | Instant |
| 7 | Compile project | âœ… Actions | 5-10min |
| 8 | Create ZIP | âœ… Actions | 30s |
| 9 | Publish release | âœ… Actions | 10s |
| **Total** | **From version to release** | **Mostly auto** | **~10-15min** |

## ğŸ¯ Advantages

âœ… **Zero manual tags** - GitHub Actions creates automatically  
âœ… **Zero manual builds** - Everything done in the cloud  
âœ… **Consistency guaranteed** - Always the same process  
âœ… **Full traceability** - Each version = commit + tag + release  
âœ… **Easy rollback** - Just revert the version.txt commit  

## ğŸ”§ Configuration

Single workflow configured in `.github/workflows/`:
- `release.yml` - Creates tags, builds, and publishes releases (all-in-one)

**No additional configuration needed!** ğŸ‰

## ğŸ“š Useful Commands

```bash
# View all tags
git tag

# View current version
cat version.txt

# View releases
gh release list  # (requires GitHub CLI)

# Monitor workflow
# Visit: https://github.com/ShiromiyaG/Shiba-Music-Desktop/actions
```

## âš ï¸ Important Notes

1. **Supported branches**: `main` or `master`
2. **Version format**: Must be `X.Y.Z` (SemVer)
3. **Duplicate tags**: Workflow checks and doesn't recreate existing tags
4. **Dependency**: libmpv must be in repository or downloaded during build
